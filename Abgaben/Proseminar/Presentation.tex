\documentclass[compress]{beamer}
%Information to be included in the title page:
\title{Langzeitverhalten von Markowketten}
\author{Nogarbek Sharykpayev, Bent Müller}
\institute{Universität Hamburg}
\date{15.06.2021}

\usepackage{tikz}
\usetikzlibrary{automata, positioning}

\setbeamertemplate{headline}[default]
\setbeamertemplate{navigation symbols}{}
\mode<beamer>{\setbeamertemplate{blocks}[rounded][shadow=true]}
\setbeamercovered{transparent}
\setbeamercolor{block body example}{fg=blue, bg=black!20}

\useoutertheme[subsection=false]{miniframes}
\usetheme{default}

\begin{document}

\frame{\titlepage}
	\begin{frame}
		\frametitle{Struktur der Präsentation}
		\tableofcontents
	\end{frame}

	\section{Konvergenz der Übergangsmatrix}
	\subsection{Invariante Wahrscheinlichkeitsverteilung}
	\subsection{Beweis der Konvergenz}

	\begin{frame}
		\frametitle{Convergence}
		Yo
	\end{frame}
	\begin{frame}
		Die konvergiert
	\end{frame}

	\section{Kommunizieren und Periodizität}
	\subsection{Kommunizierende Zustände}
	\begin{frame}
		\frametitle{Begriffe}
		$i, j \in I$ seien Zustände
		\begin{align*}
			\only<1->{
				i \rightsquigarrow j [n] & \Leftrightarrow
				p_{ij} ^{(n)} > 0 & \Leftrightarrow
				\text{ i führt in n Schritten zu j } \\
			}
			\only<2->{
				i \rightsquigarrow j & \Leftrightarrow
				\exists n \in \mathbb{N} : i \rightsquigarrow j [n] & \\
			}
			\only<3->{
				i \leftrightsquigarrow j & \Leftrightarrow
				i \rightsquigarrow j \text{ und } j \rightsquigarrow i & \Leftrightarrow
				\text{ i \textit{kommuniziert}  mit j } \\
			}
			\only<4->{
				& \forall h \in I \text{ mit } i \rightsquigarrow h
				\Rightarrow h \rightsquigarrow i & \Leftrightarrow
				\text{ i ist \textit{wesentlich} }
			}
		\end{align*}
	\end{frame}

	\begin{frame}
		\frametitle{Wichtige Folgerungen}
		Kommunizieren ist eine \textbf{Äquivalenzrelation} auf der
		Teilmenge der wesentlichen Zustände.
		\\
		\only<2->{
			Es gilt für $i, j, k$ wesentliche Zustände in $I$:
			\begin{itemize}
				\item $i \leftrightsquigarrow i$ (reflexiv)
				\item $i \leftrightsquigarrow j \Rightarrow$
					$j \leftrightsquigarrow i$ (symmetrisch)
				\item $i \leftrightsquigarrow j$ und
					$j \leftrightsquigarrow k \Rightarrow
					i \leftrightsquigarrow k$ (transitiv)
			\end{itemize}
		}
	\end{frame}

	\begin{frame}
		\frametitle{Wieso interessiert uns das?}
		\begin{center}
			\begin{tikzpicture}
				% Add the states
				\node[state]			 (a) {1};
				\node[state, right=of a] (b) {2};
				\node[state, right=of b] (c) {3};
				\node[state, right=of c] (d) {4};

				% Connect the states with arrows
				\draw[every loop]
					% a -> b -> c -> d
					(a) edge[bend right, auto=right] node {} (b)
					(c) edge[bend right, auto=right] node {} (d)

					% d -> c -> b -> a
					(d) edge[bend right, auto=right] node {} (c)
					(c) edge[bend right, auto=right] node {} (b)
					(b) edge[bend right, auto=right] node {} (a)

					% a -> a, b -> b, ...
					(a) edge[loop left]			     node {} (a)
					(d) edge[loop right]			 node {} (d)
			\end{tikzpicture}
		\end{center}

		Zustände 1 und 2 sind wesentlich, 3 und 4 aber nicht.
		\\
		\only<2->{
			\vspace{5mm}
			Was heißt das für das Langzeitverhalten der Kette?
		}
		\\
		\vspace{5mm}
		\only<3->{
			Eine invariante Verteilung würde den Zuständen 3 und 4 also
			Wahrscheinlichkeit 0 zuweisen.
		}
	\end{frame}
	\subsection{Periodische Markowketten}

	\begin{frame}
		\frametitle{Periodische Markowketten}
		Wir betrachten folgende Markowkette:
		\begin{center}
			\begin{tikzpicture}
				% Add the states
				\node[state]			 (a) {1};
				\node[state, right=of a] (b) {2};
				\node[state, right=of b] (c) {3};
				\node[state, right=of c] (d) {4};
				\node[state, right=of d] (e) {5};

				% Connect the states with arrows
				\draw[every loop]
					% a -> b -> c -> d
					(a) edge[bend right, auto=right] node {} (b)
					(b) edge[bend right, auto=right] node {} (c)
					(c) edge[bend right, auto=right] node {} (d)
					(d) edge[bend right, auto=right] node {} (e)

					% d -> c -> b -> a
					(c) edge[bend right, auto=right] node {} (a)
					(e) edge[bend right, auto=right] node {} (c)
			\end{tikzpicture}
		\end{center}
		\\
		\only<2-3>{
			Mögliche Rückkehrzeiten für Zustand 1 sind
			\[
			\{
				3, 6, 9, 12, ...
			\} 
			\only<3>{
				=
				\{
					n \in \mathbb{N} \; | \; i \rightsquigarrow i[n]
				\} 
			}
			\]
			$\Rightarrow$ Zustand 1 ist periodisch mit Periode 3.
		}
		\only<4>{
			Dies gilt sogar für alle Zustände.
			\vspace{5mm}

			$\Rightarrow$ Die Markowkette ist periodisch mit Periode 3.
		}
	\end{frame}

	\begin{frame}
		\frametitle{Definition Periode}
		Wir definieren den Begriff der Periode:
		\[
		d_i = \text{ggT} \{
			n \in \mathbb{N} \; | \; i \rightsquigarrow i[n]
		\}
		\] 
		\only<1>{
			$d_i \Rightarrow$ Periode für Zustand $i$ \\
		}
		\only<2-3>{
			$d \Rightarrow$ Periode für gesamte Markowkette \\
			\vspace{5mm}
			Wenn alle Zustände die selbe Periode haben. \\
		}
		\only<3>{
			Also wenn
			\[
			\forall i \in I : d = d_i \geq 2.
			\]
		}
		\only<4>{
			Falls $d=1$, so nennen wir die Markowkette \textbf{aperiodisch} .
		}
	\end{frame}

	\begin{frame}[t]
		\frametitle{Kommunizierende Zustände haben die selbe Periode}
		\textit{Aussage}: $i \leftrightsquigarrow j \Rightarrow d_i = d_j$ \\
		\only<2-5>{
		\textit{Beweis:} \\
		\vspace{5mm}
			Es gelte $j \rightsquigarrow j [n]$, \\
			und seien $k, m$ Zeitpunkte, sodass
			$i \rightsquigarrow j [k]$ und $j \rightsquigarrow i [m]$. \\
			\vspace{5mm}
		}
		\only<3-5>{
			Dann gilt:
			\[
				i \rightsquigarrow i [k+m] 
				\text{ und }
				i \rightsquigarrow i [k+m+n]
			\] \\
			\vspace{5mm}
		}
		\only<4-5>{
			Somit teilt $d_i$ dann $k+m$ und $k+m+n$,
			dann teilt $d_i$ auch $n$. \\
			\vspace{5mm}
		}
		\only<5>{
			Damit ist $d_i$ gemeinsamer Teiler aller $n$ mit
			$j \rightsquigarrow j [n]$. \\
			\[
			\Rightarrow d_i \leq d_j
			\]
		}
		\only<6>{
			\\
			\vspace{5mm}
			Nun folgt aus Symmetriegründen auch $d_j \leq d_i$. \\
			\vspace{5mm}
			Und damit insbesondere
			\[
			d_i = d_j.
			\]
		}
	\end{frame}
	
	\subsection{Zerlegung in Teilgruppen}
	\begin{frame}
		\frametitle{Zerlegung in Teilgruppen}
		Wir betrachten wieder unsere periodische Markowkette von vorhin:
		\begin{center}
			\begin{tikzpicture}
				% Add the states
				\node[state]			 (a) {1};
				\node[state, right=of a] (b) {2};
				\node[state, right=of b] (c) {3};
				\node[state, right=of c] (d) {4};
				\node[state, right=of d] (e) {5};

				% Connect the states with arrows
				\draw[every loop]
					% a -> b -> c -> d
					(a) edge[bend right, auto=right] node {} (b)
					(b) edge[bend right, auto=right] node {} (c)
					(c) edge[bend right, auto=right] node {} (d)
					(d) edge[bend right, auto=right] node {} (e)

					% d -> c -> b -> a
					(c) edge[bend right, auto=right] node {} (a)
					(e) edge[bend right, auto=right] node {} (c)
			\end{tikzpicture}
		\end{center}
		\\
		\vspace{5mm}
		\only<2>{
			Wir definieren
			\[
				C(i) = \{
					\;
					j \in I \; | \; j \leftrightsquigarrow i
					\;
				\} 
			\]
		}
		\only<3-4>{
			In unserem Fall sind das aber alle Zustände:
			\[
				\forall i \in I : C(i) = I
			\] 
		}
		\only<4>{
			Jetzt sehen wir: Wenn einer dieser Zustände periodisch ist,
			so sind es die anderen direkt auch alle.
		}
		\only<5>{
			Wir können die Menge $C(i)$ in Teilgruppen wie folgt zerlegen:
		}
	\end{frame}

	\section{Rekurrenz und Transienz}
	\subsection{Definition Rekurrenz}
	\subsection{Beispiel mehrdimensionale Irrfahrt}
	\begin{frame}
		\frametitle{Rekurrente Ketten}
		
	\end{frame}
	
\end{document}
